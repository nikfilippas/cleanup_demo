language: c

# Compiler selection
compiler:
  - clang
  - gcc

# Installs system level dependencies 
before_install:
  - sudo apt-get -qq update
  - sudo apt-get install fftw3 fftw3-dev pkg-config cmake

install: true

script:
    - mkdir build
    - cd build
    - cmake ..
    - make && make install

# Check why the note creation process crashes
#    - make -C doc/0000-ccl_note
#after_success:
#    if [[ -n "$GITHUB_API_KEY" ]; then
#        git checkout --orphan pdf
#        git rm -rf .
#        cp doc/0000-ccl_note/main.pdf 0000-ccl_note.pdf
#        git add -f 0000-ccl_note.pdf
#        git -c user.name='travis' -c user.email='travis' commit -m init
#        git push -q -f https://drphilmarshall:$GITHUB_API_KEY@github.com/DarkEnergyScienceCollaboration/CCL pdf
#    fi
